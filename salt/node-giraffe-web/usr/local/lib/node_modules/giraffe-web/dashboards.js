{% set environment = salt['grains.get']('environment') -%}
{% set minions     = salt['roles.list_minions']('graphite-web', out='nodename') -%}
{% set minion      = minions['graphite-web'][0]|default('localhost') -%}
{% set ip          = salt['dig.A'](minion)[0]|default(salt['hosts.get_ip'](minion))|default(minion, True) -%}
var graphite_url = "http://{{ ip }}";

var dashboards = [
    {% for minion, items in salt['mine.get']('environment:' + environment, 'grains.item', expr_form='grain')|dictsort -%}
    {% set host = minion.split('.')[0] -%}
    { "name":   "{{ minion }}",
      "refresh": 5000,
      "metrics": [
            {% for cpu in range(items.num_cpus) -%}
            {
                "alias":         "cpu-{{ loop.index0 }}",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.cpu-{{ loop.index0 }}.cpu-*",
                "unstack":        false
            },
            {% endfor -%}
            {% if         salt['mine.get'](minion, 'network.interfaces') -%}
            {% for nic in salt['mine.get'](minion, 'network.interfaces')[minion].iterkeys()|sort -%}
            {
                "alias":         "interface-{{ nic }}",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.interface-{{ nic }}.if_*.*x",
                "unstack":        false
            },
            {% endfor -%}
            {% endif -%}
            {
                "alias":         "contextswitch",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.contextswitch.*",
                "unstack":        true
            },
            {
                "alias":         "entropy",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.entropy.*",
                "unstack":        true
            },
            {
                "alias":         "irq",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.irq.*",
                "unstack":        true
            },
            {
                "alias":         "load",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.load.load.*",
                "unstack":        true
            },
            {
                "alias":         "memory",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.memory.memory-*",
                "unstack":        false
            },
            {
                "alias":         "processes",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.processes.ps_state-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-Icmp",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-Icmp.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-Ip",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-Ip.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-IpExt",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-IpExt.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-Tcp",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-Tcp.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-TcpExt",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-TcpExt.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-Udp",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-Udp.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "protocols-UdpLite",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.protocols-UdpLite.protocol_counter-*",
                "unstack":        false
            },
            {
                "alias":         "swap",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.swap.swap-*",
                "unstack":        false
            },
            {
                "alias":         "tcpconns",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.tcpconns-*-local.tcp_connections-*",
                "unstack":        false
            },
            {
                "alias":         "vmem",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.vmem.vmpage_number-*",
                "unstack":        false
            },
            {% for disk  in salt['mine.get'](minion, 'cmd.run')[minion].split('\n') -%}
            {
                "alias":         "disk-{{ disk }}",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.disk-{{ disk }}.disk_*.*",
                "unstack":        false
            },
            {% endfor -%}
            {% if           salt['mine.get'](minion, 'mount.active') -%}
            {% for mount in salt['mine.get'](minion, 'mount.active')[minion].iterkeys()|sort -%}
            {%  if mount == '/' -%}
            {% set mount =  '/root' -%}
            {% endif -%}
            {% set tld   = salt['cmd.exec_code']('python', 'import re; print re.sub(r"^(/[^/]+).*", r"\g<1>", "' + mount + '")') -%}
            {%  if not tld == '/.dockerenv'
               and not tld == '/.dockerinit'
               and not tld == '/dev'
               and not tld == '/etc'
               and not tld == '/proc'
               and not tld == '/sys'
               and not tld == '/vagrant' -%}
            {% set mount = salt['cmd.exec_code']('python', 'import re; print re.sub(r"/",           r"-", "'     + mount + '")') -%}
            {
                "alias":         "df{{ mount }}",
                "colspan":        3,
                "interpolation": "linear",
                "renderer":      "line",
                "target":        "{{ host }}.system.df{{ mount }}.df_complex-*",
                "unstack":        false
            },
            {% endif -%}
            {% endfor -%}
            {% endif -%}
            {% if 'elasticsearch'                 in items.roles -%}
            {
                "alias":         "elasticsearch cluster counts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.elasticsearch.cluster.*_count)",
                "unstack":        true
            },
            {
                "alias":         "elasticsearch cluster nodes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.elasticsearch.cluster.*_nodes",
                "unstack":        true
            },
            {
                "alias":         "elasticsearch cluster shards",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.elasticsearch.cluster.*_shards",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hadoop-hdfs-datanode'          in items.roles -%}
            {
                "alias":         "hadoop-hdfs-datanode java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java garbage collections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.JvmMetrics.GcCount*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java garbage collection times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.JvmMetrics.GcTime*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java log levels",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.JvmMetrics.Log*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.JvmMetrics.Mem*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hadoop-hdfs-datanode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.JvmMetrics.Threads*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode metrics average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.MetricsSystem.Stats.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode metrics operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.MetricsSystem.Stats.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode metrics sinks and sources",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.MetricsSystem.Stats.Num*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 blocks",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.Blocks*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.Bytes*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 failures",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.*Failures",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 i/o",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.*From*Client)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50010 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.DataNodeActivity-*-50010.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-datanode rpc/50020 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-datanode.Rpc*ActivityForPort50020.CallQueueLength",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hadoop-hdfs-journalnode'       in items.roles -%}
            {
                "alias":         "hadoop-hdfs-journalnode java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java garbage collections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.JvmMetrics.GcCount*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java garbage collection times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.JvmMetrics.GcTime*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java log levels",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.JvmMetrics.Log*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.JvmMetrics.Mem*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hadoop-hdfs-journalnode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.JvmMetrics.Threads*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode journal latency micros",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.Journal-journalhdfs*.*LatencyMicros",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode journal operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.Journal-journalhdfs*.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode metrics average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.MetricsSystem.Control.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode metrics operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.MetricsSystem.Control.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode metrics sinks and sources",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.MetricsSystem.Control.Num*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode rpc/8485 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.Rpc*ActivityForPort8485.CallQueueLength",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode user/group average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-journalnode.UgiMetrics.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-journalnode user/group operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-journalnode.UgiMetrics.*NumOps)",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hadoop-hdfs-namenode'          in items.roles -%}
            {
                "alias":         "hadoop-hdfs-namenode java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java garbage collections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.JvmMetrics.GcCount*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java garbage collection times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.JvmMetrics.GcTime*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java log levels",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.JvmMetrics.Log*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.JvmMetrics.Mem*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hadoop-hdfs-namenode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.JvmMetrics.Threads*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode activity average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.NameNodeActivity.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode activity files",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.NameNodeActivity.Files*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode activity operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.NameNodeActivity.*Ops",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem blocks",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystem.*Blocks",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem capacity",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystem.Capacity*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem transactions",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystem.TransactionsSinceLast*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem state blocks",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystemState.*Blocks",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem state capacity",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystemState.Capacity*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode filesystem state datanodes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.FSNamesystemState.Num*DataNodes",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode information percentages",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.NameNodeInfo.Percent*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode metrics average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.MetricsSystem.Stats.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode metrics operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.MetricsSystem.Stats.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode metrics sinks and sources",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.MetricsSystem.Stats.Num*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8020 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8020.CallQueueLength",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode rpc/8022 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.Rpc*ActivityForPort8022.CallQueueLength",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode user/group average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-namenode.UgiMetrics.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-namenode user/group operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-namenode.UgiMetrics.*NumOps)",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hadoop-hdfs-secondarynamenode' in items.roles -%}
            {
                "alias":         "hadoop-hdfs-secondarynamenode java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java garbage collections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-secondarynamenode.JvmMetrics.GcCount*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java garbage collection times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.JvmMetrics.GcTime*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java log levels",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-secondarynamenode.JvmMetrics.Log*)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.JvmMetrics.Mem*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.JvmMetrics.Threads*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode metrics average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.MetricsSystem.Stats.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode metrics operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-secondarynamenode.MetricsSystem.Stats.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode metrics sinks and sources",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.MetricsSystem.Stats.Num*",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode user/group average times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hadoop-hdfs-secondarynamenode.UgiMetrics.*AvgTime",
                "unstack":        true
            },
            {
                "alias":         "hadoop-hdfs-secondarynamenode user/group operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hadoop-hdfs-secondarynamenode.UgiMetrics.*NumOps)",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hbase-master'                  in items.roles -%}
            {
                "alias":         "hbase-master java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-master java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-master java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-master java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hbase-master java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hbase-master operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-master.MasterStatistics.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hbase-master times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.MasterStatistics.*Time",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-master.RPCStatistics-60000.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.RPCStatistics-60000.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.RPCStatistics-60000.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-master.RPCStatistics-60000.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.RPCStatistics-60000.*QueueLen",
                "unstack":        true
            },
            {
                "alias":         "hbase-master rpc/60000 times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-master.RPCStatistics-60000.*Time",
                "unstack":        true
            },
            {% endif -%}
            {% if 'hbase-regionserver'            in items.roles -%}
            {
                "alias":         "hbase-regionserver java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "hbase-regionserver java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 auth attempts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RPCStatistics-60020.RpcAuth*)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 bytes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RPCStatistics-60020.*Bytes",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 open connections",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RPCStatistics-60020.NumOpenConnections",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RPCStatistics-60020.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 queue lengths",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RPCStatistics-60020.*QueueLen",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver rpc/60020 times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RPCStatistics-60020.*Time",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver block cache counts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RegionServerStatistics.blockCache*Count)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver block cache hit ratios",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.blockCache*Ratio",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver block cache hit ratios for past N periods",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.blockCacheHit*RatioPastNPeriods",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver counts",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RegionServerStatistics.*Count)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver dynamic files",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerDynamicStatistics.*FileCount*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver dynamic sizes (KB)",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerDynamicStatistics.*SizeKB*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver dynamic sizes (MB)",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerDynamicStatistics.*SizeMB*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver filesystem positional read latencies",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.fsPreadLatencyHistogram*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver filesystem read latencies",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.fsReadLatencyHistogram*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver filesystem write latencies",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.fsWriteLatencyHistogram*",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver operations",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RegionServerStatistics.*NumOps)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver sizes (KB)",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.*SizeKB",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver sizes (MB)",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.*SizeMB",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver times",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.hbase-regionserver.RegionServerStatistics.*Time",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver time blocked on lack of resources",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RegionServerStatistics.updatesBlockedSeconds*)",
                "unstack":        true
            },
            {
                "alias":         "hbase-regionserver time blocked on memstore high watermark",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "derivative({{ host }}.hbase-regionserver.RegionServerStatistics.updatesBlockedSecondsHighWater*)",
                "unstack":        true
            },
            {% endif -%}
            {% if 'zookeeper-server'              in items.roles -%}
            {
                "alias":         "zookeeper-server java classes",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.zookeeper-server.java.lang.ClassLoading.*",
                "unstack":        true
            },
            {
                "alias":         "zookeeper-server java memory pool",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.zookeeper-server.java.lang.MemoryPool.*.Usage.*",
                "unstack":        true
            },
            {
                "alias":         "zookeeper-server java memory usage",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.zookeeper-server.java.lang.Memory.*HeapMemoryUsage.*",
                "unstack":        true
            },
            {
                "alias":         "zookeeper-server java system load average",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.zookeeper-server.java.lang.OperatingSystem.SystemLoadAverage",
                "unstack":        false
            },
            {
                "alias":         "zookeeper-server java threads",
                "colspan":        3,
                "interpolation": "linear",
                "null_as":        0,
                "renderer":      "line",
                "target":        "{{ host }}.zookeeper-server.java.lang.Threading.*ThreadCount",
                "unstack":        true
            },
            {% endif -%}
        ]
    },
    {% endfor -%}
];

var scheme = [
    '#423d4f',
    '#4a6860',
    '#848f39',
    '#a2b73c',
    '#ddcb53',
    '#c5a32f',
    '#7d5836',
    '#963b20',
    '#7c2626',
].reverse();

function relative_period() {
    return ( typeof period == 'undefined' ) ? 1 : parseInt( period / 7 ) + 1;
}

function entire_period() {
    return ( typeof period == 'undefined' ) ? 1 : period;
}

function at_least_a_day() {
    return entire_period() >= 1440 ? entire_period() : 1440;
}
